<div *ngIf="error">
  <h3 class="res-msg">{{ error }}</h3>
</div>

<h2>Login</h2>
<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <mat-form-field>
    <mat-label>Username</mat-label>
    <input
      type="text"
      placeholder="Enter your username"
      formControlName="username"
      autocomplete="username"
      matInput
    />
  </mat-form-field>
  @if ( form.controls.username.invalid && form.controls.username.touched) { @if
  (form.controls.username.errors?.['required']) {
  <small class="error-msg">Username is required</small>
  } @if (form.controls.username.errors?.['minlength']) {
  <small class="error-msg">Username must be at least 3 characters long</small>
  } }

  <mat-form-field>
    <mat-label>Password</mat-label>
    <input
      type="password"
      placeholder="Enter your password"
      formControlName="password"
      autocomplete="current-password"
      matInput
    />
  </mat-form-field>
  @if (form.controls.password.invalid && form.controls.password.touched) { @if
  (form.controls.password.errors?.['required']) {
  <small class="error-msg">Password is required</small>
  } @if (form.controls.password.errors?.['pattern']) {
  <small class="error-msg"
    >Please match the requested format: at least 8 characters long, min 1
    uppercase letter, 1 digit and 1 special character</small
  >
  }}

  <div>
    <button mat-raised-button type="submit" [disabled]="!form.valid">
      Sign In
    </button>
  </div>
</form>
